<link rel="import" href="../elements.html">

<dom-module id="new-episode">
	<style>
		:host {
			height: 100%;
			width: 100%;
			display: block;
			position: relative;
			font-family: 'Roboto', sans-serif;
			-webkit-font-smoothing: antialiased;
			text-rendering: optimizeLegibility;
		}
		.playerloc {
			position: relative;
			display: block;
			height: 150px;
			margin-top: 50px;
		}
		podcast-player {
			position: absolute;
			bottom: 0;
		}
		.episode-info {
			margin: 50px;
			padding: 20px;
		}
		.episode-info h1{
			color: var(--primary-text-color);
			font-size: 40px;
			font-weight: 100;
			margin-top: 10px;
		}
		.episode-info h5{
			color: var(--secondary-text-color);
			font-weight: 100;
			margin-bottom: 0;
			margin-top: 40px;
		}
		.episode-coverart {
			width: 120px;
			height: 120px;
		}
	</style>
	<template>
		<iron-localstorage name="content" value="{{localstoragecontent}}"></iron-localstorage>
		<iron-ajax id="contentservice"
				auto
				url="http://localhost:3000/content.json"
				handle-as="json"
				on-response="_handleContentResponse"></iron-ajax>
		<paper-material class="episode-info" elevation="1">
			<div class="titlebar layout horizontal">
				<div class="flex layout vertical">
					<h5>Episode <span>{{content.episode}}</span></h5>
					<h1 class="flex">{{content.title}}</h1>
				</div>
				<div>
					<iron-image class="episode-coverart"	src="{{content.coverart}}" sizing="contain"></iron-image>
				</div>
			</div>
			<div class="summary">
				<p>{{content.summary}}</p>
			</div>
			
		</paper-material>
		<div class="playerloc">
			<podcast-player
				src="http://traffic.libsyn.com/thewebplatform/episode-53_diving-into-angular-2.mp3"
				name="Diving into Angular 2"
				coverart="http://assets.libsyn.com/content/9454132"
  			episode="53"></podcast-player>
		</div>
	</template>
</dom-module>
<script>
	( function() {
		Polymer({
			is: 'new-episode',
			properties: {
				localstoragecontent: {
					type: Object,
					observer: '_updateContent'
				},
				content: {
					type: Object,
					value: []
				}
			},
			_updateContent: function () {
				this.content = this.localstoragecontent[0];
			},
			_handleContentResponse: function (e, detail) {
				this.localstoragecontent = detail.response;
			}
		});
	})();
</script>